{"ast":null,"code":"async function request(method, target, data) {\n  let options = {\n    method,\n    headers: {}\n  };\n  if (data != undefined) {\n    options.body = JSON.stringify(data);\n    options.headers['content-type'] = 'application/json';\n  }\n  let user = JSON.parse(localStorage.getItem('user'));\n  if (user) {\n    options.headers['X-Authorization'] = user.accessToken;\n  }\n  try {\n    let response = await fetch(baseUrl + target, options);\n    if (response.ok == false) {\n      if (response.status == 403) {\n        localStorage.clear();\n      }\n      let error = await response.json();\n      throw new Error(error.message);\n    }\n    if (response.status == 204) {\n      return response;\n    } else {\n      return response.json();\n    }\n  } catch (error) {\n    alert(error.message);\n    throw error;\n  }\n}\nconst get = request.bind({}, 'GET');\nconst post = request.bind({}, 'POST');\nconst put = request.bind({}, 'PUT');\nconst del = request.bind({}, 'DELETE');\nexport { get, post, put, del as delete };","map":{"version":3,"names":["request","method","target","data","options","headers","undefined","body","JSON","stringify","user","parse","localStorage","getItem","accessToken","response","fetch","baseUrl","ok","status","clear","error","json","Error","message","alert","get","bind","post","put","del","delete"],"sources":["C:/Users/Niki/Documents/Softuni/React/photo-sharing-app/client/src/utils/request.js"],"sourcesContent":["async function request(method,target,data){\r\n    let options = {\r\n        method,\r\n        headers : {}\r\n    }\r\n    if(data != undefined){\r\n        options.body = JSON.stringify(data);\r\n        options.headers['content-type'] = 'application/json';\r\n    }\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n    if(user){\r\n        options.headers['X-Authorization'] = user.accessToken;\r\n    }\r\n    try {\r\n        let response = await fetch(baseUrl + target,options);\r\n        if(response.ok == false){\r\n            if(response.status == 403){\r\n                localStorage.clear();\r\n             }\r\n           let error = await response.json();\r\n           throw new Error(error.message)\r\n        }\r\n        if(response.status == 204){\r\n            return response;\r\n        }else {\r\n            return response.json();\r\n        }\r\n    } catch (error) {\r\n        alert(error.message);\r\n        throw error;\r\n    }\r\n}\r\nconst get = request.bind({},'GET');\r\nconst post = request.bind({},'POST');\r\nconst put = request.bind({},'PUT');\r\nconst del = request.bind({},'DELETE');\r\n\r\nexport {\r\n    get,\r\n    post,\r\n    put,\r\n    del as delete\r\n}"],"mappings":"AAAA,eAAeA,OAAOA,CAACC,MAAM,EAACC,MAAM,EAACC,IAAI,EAAC;EACtC,IAAIC,OAAO,GAAG;IACVH,MAAM;IACNI,OAAO,EAAG,CAAC;EACf,CAAC;EACD,IAAGF,IAAI,IAAIG,SAAS,EAAC;IACjBF,OAAO,CAACG,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACN,IAAI,CAAC;IACnCC,OAAO,CAACC,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EACxD;EACA,IAAIK,IAAI,GAAGF,IAAI,CAACG,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACnD,IAAGH,IAAI,EAAC;IACJN,OAAO,CAACC,OAAO,CAAC,iBAAiB,CAAC,GAAGK,IAAI,CAACI,WAAW;EACzD;EACA,IAAI;IACA,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACC,OAAO,GAAGf,MAAM,EAACE,OAAO,CAAC;IACpD,IAAGW,QAAQ,CAACG,EAAE,IAAI,KAAK,EAAC;MACpB,IAAGH,QAAQ,CAACI,MAAM,IAAI,GAAG,EAAC;QACtBP,YAAY,CAACQ,KAAK,EAAE;MACvB;MACF,IAAIC,KAAK,GAAG,MAAMN,QAAQ,CAACO,IAAI,EAAE;MACjC,MAAM,IAAIC,KAAK,CAACF,KAAK,CAACG,OAAO,CAAC;IACjC;IACA,IAAGT,QAAQ,CAACI,MAAM,IAAI,GAAG,EAAC;MACtB,OAAOJ,QAAQ;IACnB,CAAC,MAAK;MACF,OAAOA,QAAQ,CAACO,IAAI,EAAE;IAC1B;EACJ,CAAC,CAAC,OAAOD,KAAK,EAAE;IACZI,KAAK,CAACJ,KAAK,CAACG,OAAO,CAAC;IACpB,MAAMH,KAAK;EACf;AACJ;AACA,MAAMK,GAAG,GAAG1B,OAAO,CAAC2B,IAAI,CAAC,CAAC,CAAC,EAAC,KAAK,CAAC;AAClC,MAAMC,IAAI,GAAG5B,OAAO,CAAC2B,IAAI,CAAC,CAAC,CAAC,EAAC,MAAM,CAAC;AACpC,MAAME,GAAG,GAAG7B,OAAO,CAAC2B,IAAI,CAAC,CAAC,CAAC,EAAC,KAAK,CAAC;AAClC,MAAMG,GAAG,GAAG9B,OAAO,CAAC2B,IAAI,CAAC,CAAC,CAAC,EAAC,QAAQ,CAAC;AAErC,SACID,GAAG,EACHE,IAAI,EACJC,GAAG,EACHC,GAAG,IAAIC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}