{"ast":null,"code":"const baseUrl = 'http://localhost:3030';\nasync function request(method, target, data) {\n  let targetUrl = target.startsWith('http') ? target : baseUrl + target;\n  let options = {\n    method,\n    headers: {}\n  };\n  if (data != undefined) {\n    if (data instanceof FormData) {\n      options.body = data;\n    } else {\n      options.body = JSON.stringify(data);\n      options.headers['content-type'] = 'application/json';\n    }\n  }\n  let user = JSON.parse(localStorage.getItem('user'));\n  if (user) {\n    options.headers['X-Authorization'] = user.accessToken;\n  }\n  try {\n    let response = await fetch(targetUrl, options);\n    if (response.ok === false) {\n      if (response.status === 403) {\n        localStorage.clear();\n      }\n      let error = await response.json();\n      throw new Error(error.message);\n    }\n    if (response.status === 204) {\n      return response;\n    } else {\n      return response.json();\n    }\n  } catch (error) {\n    alert(error.message);\n    throw error;\n  }\n}\nconst get = request.bind({}, 'GET');\nconst post = request.bind({}, 'POST');\nconst put = request.bind({}, 'PUT');\nconst del = request.bind({}, 'DELETE');\nexport { get, post, put, del as delete };","map":{"version":3,"names":["baseUrl","request","method","target","data","targetUrl","startsWith","options","headers","undefined","FormData","body","JSON","stringify","user","parse","localStorage","getItem","accessToken","response","fetch","ok","status","clear","error","json","Error","message","alert","get","bind","post","put","del","delete"],"sources":["C:/Users/Niki/Documents/Softuni/React/photo-sharing-app/client/src/utils/request.js"],"sourcesContent":["const baseUrl = 'http://localhost:3030';\r\n\r\nasync function request(method,target,data){\r\n\r\n    let targetUrl = target.startsWith('http')? target : baseUrl + target;\r\n\r\n    let options = {\r\n        method,\r\n        headers : {}\r\n    }\r\n    if(data != undefined){\r\n        if (data instanceof FormData) {\r\n            options.body = data;\r\n        }\r\n        else{\r\n            options.body = JSON.stringify(data);\r\n            options.headers['content-type'] = 'application/json';\r\n        }\r\n       \r\n    }\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n    if(user){\r\n        options.headers['X-Authorization'] = user.accessToken;\r\n    }\r\n    try {\r\n        let response = await fetch(targetUrl,options);\r\n        if(response.ok === false){\r\n            if(response.status === 403){\r\n                localStorage.clear();\r\n             }\r\n           let error = await response.json();\r\n           throw new Error(error.message)\r\n        }\r\n        if(response.status === 204){\r\n            return response;\r\n        }else {\r\n            return response.json();\r\n        }\r\n    } catch (error) {\r\n        alert(error.message);\r\n        throw error;\r\n    }\r\n}\r\nconst get = request.bind({},'GET');\r\nconst post = request.bind({},'POST');\r\nconst put = request.bind({},'PUT');\r\nconst del = request.bind({},'DELETE');\r\n\r\nexport {\r\n    get,\r\n    post,\r\n    put,\r\n    del as delete\r\n}"],"mappings":"AAAA,MAAMA,OAAO,GAAG,uBAAuB;AAEvC,eAAeC,OAAOA,CAACC,MAAM,EAACC,MAAM,EAACC,IAAI,EAAC;EAEtC,IAAIC,SAAS,GAAGF,MAAM,CAACG,UAAU,CAAC,MAAM,CAAC,GAAEH,MAAM,GAAGH,OAAO,GAAGG,MAAM;EAEpE,IAAII,OAAO,GAAG;IACVL,MAAM;IACNM,OAAO,EAAG,CAAC;EACf,CAAC;EACD,IAAGJ,IAAI,IAAIK,SAAS,EAAC;IACjB,IAAIL,IAAI,YAAYM,QAAQ,EAAE;MAC1BH,OAAO,CAACI,IAAI,GAAGP,IAAI;IACvB,CAAC,MACG;MACAG,OAAO,CAACI,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC;MACnCG,OAAO,CAACC,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;IACxD;EAEJ;EACA,IAAIM,IAAI,GAAGF,IAAI,CAACG,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACnD,IAAGH,IAAI,EAAC;IACJP,OAAO,CAACC,OAAO,CAAC,iBAAiB,CAAC,GAAGM,IAAI,CAACI,WAAW;EACzD;EACA,IAAI;IACA,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACf,SAAS,EAACE,OAAO,CAAC;IAC7C,IAAGY,QAAQ,CAACE,EAAE,KAAK,KAAK,EAAC;MACrB,IAAGF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAC;QACvBN,YAAY,CAACO,KAAK,EAAE;MACvB;MACF,IAAIC,KAAK,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;MACjC,MAAM,IAAIC,KAAK,CAACF,KAAK,CAACG,OAAO,CAAC;IACjC;IACA,IAAGR,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAC;MACvB,OAAOH,QAAQ;IACnB,CAAC,MAAK;MACF,OAAOA,QAAQ,CAACM,IAAI,EAAE;IAC1B;EACJ,CAAC,CAAC,OAAOD,KAAK,EAAE;IACZI,KAAK,CAACJ,KAAK,CAACG,OAAO,CAAC;IACpB,MAAMH,KAAK;EACf;AACJ;AACA,MAAMK,GAAG,GAAG5B,OAAO,CAAC6B,IAAI,CAAC,CAAC,CAAC,EAAC,KAAK,CAAC;AAClC,MAAMC,IAAI,GAAG9B,OAAO,CAAC6B,IAAI,CAAC,CAAC,CAAC,EAAC,MAAM,CAAC;AACpC,MAAME,GAAG,GAAG/B,OAAO,CAAC6B,IAAI,CAAC,CAAC,CAAC,EAAC,KAAK,CAAC;AAClC,MAAMG,GAAG,GAAGhC,OAAO,CAAC6B,IAAI,CAAC,CAAC,CAAC,EAAC,QAAQ,CAAC;AAErC,SACID,GAAG,EACHE,IAAI,EACJC,GAAG,EACHC,GAAG,IAAIC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}